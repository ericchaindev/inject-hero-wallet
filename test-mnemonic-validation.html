<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mnemonic Validation Test</title>
    <style>
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        max-width: 800px;
        margin: 40px auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .container {
        background: white;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #333;
        margin-bottom: 10px;
      }
      .subtitle {
        color: #666;
        margin-bottom: 30px;
      }
      textarea {
        width: 100%;
        min-height: 120px;
        padding: 12px;
        font-family: 'Consolas', 'Monaco', monospace;
        font-size: 13px;
        border: 2px solid #ddd;
        border-radius: 8px;
        resize: vertical;
        box-sizing: border-box;
      }
      textarea:focus {
        outline: none;
        border-color: #4caf50;
      }
      .button-group {
        display: flex;
        gap: 10px;
        margin-top: 15px;
      }
      button {
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 600;
        transition: all 0.2s;
      }
      .btn-primary {
        background: #4caf50;
        color: white;
        flex: 1;
      }
      .btn-primary:hover {
        background: #45a049;
      }
      .btn-secondary {
        background: #2196f3;
        color: white;
      }
      .btn-secondary:hover {
        background: #0b7dda;
      }
      .btn-clear {
        background: #f44336;
        color: white;
      }
      .btn-clear:hover {
        background: #da190b;
      }
      .result {
        margin-top: 20px;
        padding: 15px;
        border-radius: 8px;
        font-size: 14px;
      }
      .result.success {
        background: #d4edda;
        border: 1px solid #c3e6cb;
        color: #155724;
      }
      .result.error {
        background: #f8d7da;
        border: 1px solid #f5c6cb;
        color: #721c24;
      }
      .result.info {
        background: #d1ecf1;
        border: 1px solid #bee5eb;
        color: #0c5460;
      }
      .info-box {
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        padding: 15px;
        border-radius: 8px;
        margin: 20px 0;
        font-size: 13px;
      }
      .code {
        background: #f4f4f4;
        padding: 2px 6px;
        border-radius: 3px;
        font-family: 'Consolas', 'Monaco', monospace;
        font-size: 12px;
      }
      .test-mnemonics {
        margin-top: 30px;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 8px;
      }
      .test-mnemonics h3 {
        margin-top: 0;
        color: #495057;
      }
      .test-mnemonic-item {
        margin: 10px 0;
        padding: 10px;
        background: white;
        border-radius: 6px;
        cursor: pointer;
        border: 2px solid transparent;
        transition: all 0.2s;
      }
      .test-mnemonic-item:hover {
        border-color: #4caf50;
        transform: translateX(5px);
      }
      .test-mnemonic-item strong {
        color: #2196f3;
        display: block;
        margin-bottom: 5px;
      }
      .test-mnemonic-item code {
        display: block;
        font-size: 11px;
        color: #666;
        word-break: break-all;
      }
      .stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin-top: 20px;
      }
      .stat-box {
        padding: 15px;
        background: #f8f9fa;
        border-radius: 8px;
        text-align: center;
      }
      .stat-box .label {
        font-size: 12px;
        color: #666;
        margin-bottom: 5px;
      }
      .stat-box .value {
        font-size: 24px;
        font-weight: bold;
        color: #333;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üîç Mnemonic Validation Test</h1>
      <p class="subtitle">
        Test BIP39 mnemonic phrase validation (same logic as wallet)
      </p>

      <div class="info-box">
        üí° <strong>How to use:</strong><br />
        1. Paste your mnemonic phrase in the textarea below<br />
        2. Click "Validate" to test if it's valid<br />
        3. Or click a test mnemonic below to auto-fill
      </div>

      <textarea
        id="mnemonicInput"
        placeholder="Enter your mnemonic phrase here...
Examples:
- 12 words separated by spaces
- 24 words separated by spaces
- Can have multiple spaces or newlines (will be cleaned automatically)"
      ></textarea>

      <div class="button-group">
        <button class="btn-primary" onclick="validateMnemonic()">
          ‚úì Validate Mnemonic
        </button>
        <button class="btn-secondary" onclick="cleanMnemonic()">
          üßπ Clean & Show
        </button>
        <button class="btn-clear" onclick="clearInput()">‚úï Clear</button>
      </div>

      <div id="result"></div>

      <div class="test-mnemonics">
        <h3>üìã Test Mnemonics (Click to auto-fill)</h3>

        <div
          class="test-mnemonic-item"
          onclick="fillMnemonic('bottom drive obey lake curtain smoke basket hold race lonely fit walk')"
        >
          <strong>‚úÖ Valid 12-word (Default Test)</strong>
          <code
            >bottom drive obey lake curtain smoke basket hold race lonely fit
            walk</code
          >
        </div>

        <div
          class="test-mnemonic-item"
          onclick="fillMnemonic('abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about')"
        >
          <strong>‚úÖ Valid 12-word (Standard Test)</strong>
          <code
            >abandon abandon abandon abandon abandon abandon abandon abandon
            abandon abandon abandon about</code
          >
        </div>

        <div
          class="test-mnemonic-item"
          onclick="fillMnemonic('bottom  drive   obey    lake\ncurtain smoke basket\nhold race lonely fit walk')"
        >
          <strong>üß™ Valid with extra spaces & newlines</strong>
          <code
            >bottom drive obey lake\ncurtain smoke basket\nhold race lonely fit
            walk</code
          >
        </div>

        <div
          class="test-mnemonic-item"
          onclick="fillMnemonic('test abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about')"
        >
          <strong>‚ùå Invalid (bad checksum)</strong>
          <code
            >test abandon abandon abandon abandon abandon abandon abandon
            abandon abandon abandon about</code
          >
        </div>

        <div
          class="test-mnemonic-item"
          onclick="fillMnemonic('word1 word2 word3 word4 word5 word6 word7 word8 word9 word10 word11 word12')"
        >
          <strong>‚ùå Invalid (not BIP39 words)</strong>
          <code
            >word1 word2 word3 word4 word5 word6 word7 word8 word9 word10 word11
            word12</code
          >
        </div>

        <div
          class="test-mnemonic-item"
          onclick="fillMnemonic('abandon abandon abandon abandon abandon')"
        >
          <strong>‚ùå Invalid (only 5 words)</strong>
          <code>abandon abandon abandon abandon abandon</code>
        </div>
      </div>
    </div>

    <script type="module">
      import * as bip39 from 'https://cdn.jsdelivr.net/npm/bip39@3.1.0/+esm';

      window.bip39Module = bip39;

      window.validateMnemonic = function () {
        const input = document.getElementById('mnemonicInput').value;
        const resultDiv = document.getElementById('result');

        if (!input.trim()) {
          resultDiv.className = 'result error';
          resultDiv.innerHTML = '‚ùå Please enter a mnemonic phrase';
          return;
        }

        // Clean up mnemonic (same logic as wallet)
        const cleaned = input.trim().toLowerCase().replace(/\s+/g, ' ');

        const words = cleaned.split(' ');
        const wordCount = words.length;

        console.log('üîç Original input:', input);
        console.log('üîç Cleaned:', cleaned);
        console.log('üîç Word count:', wordCount);
        console.log('üîç Words:', words);

        const isValid = bip39.validateMnemonic(cleaned);

        if (isValid) {
          resultDiv.className = 'result success';
          resultDiv.innerHTML = `
                    <div style="font-size: 18px; margin-bottom: 10px;">‚úÖ Valid Mnemonic!</div>
                    <div class="stats">
                        <div class="stat-box">
                            <div class="label">Word Count</div>
                            <div class="value">${wordCount}</div>
                        </div>
                        <div class="stat-box">
                            <div class="label">Status</div>
                            <div class="value" style="color: #4CAF50;">Valid</div>
                        </div>
                        <div class="stat-box">
                            <div class="label">Type</div>
                            <div class="value">${
                              wordCount === 12 ? '128-bit' : '256-bit'
                            }</div>
                        </div>
                    </div>
                    <div style="margin-top: 15px; font-size: 13px;">
                        <strong>Cleaned mnemonic:</strong><br>
                        <code style="display: block; margin-top: 5px; padding: 10px; background: #f4f4f4; border-radius: 4px;">
                            ${cleaned}
                        </code>
                    </div>
                `;
        } else {
          resultDiv.className = 'result error';
          resultDiv.innerHTML = `
                    <div style="font-size: 18px; margin-bottom: 10px;">‚ùå Invalid Mnemonic</div>
                    <div class="stats">
                        <div class="stat-box">
                            <div class="label">Word Count</div>
                            <div class="value">${wordCount}</div>
                        </div>
                        <div class="stat-box">
                            <div class="label">Expected</div>
                            <div class="value">12 or 24</div>
                        </div>
                        <div class="stat-box">
                            <div class="label">Status</div>
                            <div class="value" style="color: #f44336;">Invalid</div>
                        </div>
                    </div>
                    <div style="margin-top: 15px; font-size: 13px;">
                        <strong>Possible issues:</strong><br>
                        ${
                          wordCount !== 12 && wordCount !== 24
                            ? `‚Ä¢ Wrong word count (found ${wordCount}, expected 12 or 24)<br>`
                            : ''
                        }
                        ‚Ä¢ Invalid BIP39 words<br>
                        ‚Ä¢ Wrong word order<br>
                        ‚Ä¢ Checksum validation failed
                    </div>
                `;
        }
      };

      window.cleanMnemonic = function () {
        const input = document.getElementById('mnemonicInput').value;
        const resultDiv = document.getElementById('result');

        if (!input.trim()) {
          resultDiv.className = 'result error';
          resultDiv.innerHTML = '‚ùå Please enter a mnemonic phrase';
          return;
        }

        const cleaned = input.trim().toLowerCase().replace(/\s+/g, ' ');

        const words = cleaned.split(' ');

        resultDiv.className = 'result info';
        resultDiv.innerHTML = `
                <div style="font-size: 16px; margin-bottom: 10px;">üßπ Cleaned Result</div>
                <div class="stats">
                    <div class="stat-box">
                        <div class="label">Original Length</div>
                        <div class="value">${input.length}</div>
                    </div>
                    <div class="stat-box">
                        <div class="label">Cleaned Length</div>
                        <div class="value">${cleaned.length}</div>
                    </div>
                    <div class="stat-box">
                        <div class="label">Word Count</div>
                        <div class="value">${words.length}</div>
                    </div>
                </div>
                <div style="margin-top: 15px; font-size: 13px;">
                    <strong>Cleaned mnemonic:</strong><br>
                    <code style="display: block; margin-top: 5px; padding: 10px; background: #f4f4f4; border-radius: 4px; word-break: break-all;">
                        ${cleaned}
                    </code>
                </div>
                <div style="margin-top: 10px; font-size: 12px; color: #666;">
                    üí° This is what will be validated by the wallet
                </div>
            `;
      };

      window.clearInput = function () {
        document.getElementById('mnemonicInput').value = '';
        document.getElementById('result').innerHTML = '';
      };

      window.fillMnemonic = function (mnemonic) {
        document.getElementById('mnemonicInput').value = mnemonic;
        document.getElementById('result').innerHTML = '';
        // Auto-scroll to textarea
        document
          .getElementById('mnemonicInput')
          .scrollIntoView({ behavior: 'smooth', block: 'center' });
      };

      console.log('‚úÖ Mnemonic validation tester loaded');
      console.log('üì¶ BIP39 library version:', bip39);
    </script>
  </body>
</html>
