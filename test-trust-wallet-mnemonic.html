<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ” ØªØ´Ø®ÛŒØµ Ø¯Ù‚ÛŒÙ‚ Ù…Ø´Ú©Ù„ Mnemonic</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }
      .container {
        max-width: 900px;
        margin: 0 auto;
        background: white;
        border-radius: 16px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        overflow: hidden;
      }
      .header {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
        padding: 30px;
        text-align: center;
      }
      .content {
        padding: 30px;
      }
      textarea {
        width: 100%;
        min-height: 150px;
        padding: 15px;
        font-family: 'Consolas', monospace;
        font-size: 15px;
        border: 3px solid #ddd;
        border-radius: 8px;
        direction: ltr;
        text-align: left;
        line-height: 2;
      }
      textarea:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.2);
      }
      .btn {
        width: 100%;
        padding: 18px;
        margin-top: 15px;
        border: none;
        border-radius: 8px;
        font-size: 18px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
      }
      .btn-check {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }
      .btn-check:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
      }
      .result {
        margin-top: 20px;
        padding: 25px;
        border-radius: 12px;
        display: none;
      }
      .result.show {
        display: block;
      }
      .result.error {
        background: #fee;
        border: 3px solid #fcc;
      }
      .result.success {
        background: #efe;
        border: 3px solid #cfc;
      }
      .result.warning {
        background: #ffe;
        border: 3px solid #fec;
      }
      .word-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
        margin: 20px 0;
      }
      .word-box {
        padding: 15px;
        border-radius: 8px;
        text-align: center;
        font-family: 'Consolas', monospace;
        font-size: 14px;
        font-weight: bold;
        border: 3px solid;
      }
      .word-box.valid {
        background: #d4edda;
        border-color: #28a745;
        color: #155724;
      }
      .word-box.invalid {
        background: #f8d7da;
        border-color: #dc3545;
        color: #721c24;
      }
      .word-num {
        display: block;
        font-size: 11px;
        opacity: 0.6;
        margin-bottom: 5px;
      }
      .big-icon {
        font-size: 60px;
        text-align: center;
        margin-bottom: 15px;
      }
      .title {
        font-size: 28px;
        font-weight: bold;
        text-align: center;
        margin-bottom: 20px;
      }
      .info-box {
        background: #e7f3ff;
        border: 3px solid #4dabf7;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        font-size: 15px;
        line-height: 1.8;
      }
      .error-detail {
        background: white;
        padding: 20px;
        border-radius: 8px;
        margin: 15px 0;
        direction: ltr;
        text-align: left;
        font-family: 'Consolas', monospace;
      }
      code {
        background: #f4f4f4;
        padding: 3px 8px;
        border-radius: 4px;
        font-family: 'Consolas', monospace;
      }
      .highlight {
        background: yellow;
        padding: 2px 5px;
        border-radius: 3px;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>ğŸ” ØªØ´Ø®ÛŒØµ Ù…Ø´Ú©Ù„ Mnemonic</h1>
        <p style="margin-top: 10px; font-size: 16px">
          Ø¨Ø±Ø§ÛŒ Trust Wallet Ùˆ Ø³Ø§ÛŒØ± Wallet Ù‡Ø§
        </p>
      </div>

      <div class="content">
        <div class="info-box">
          <strong>ğŸ“Œ Ø±Ø§Ù‡Ù†Ù…Ø§:</strong><br />
          â€¢ Ú©Ù„Ù…Ø§Øª 12 Ú¯Ø§Ù†Ù‡ Trust Wallet Ø®ÙˆØ¯ Ø±Ø§ Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ù‡Ù…Ø§Ù†Ø·ÙˆØ± Ú©Ù‡ Ù‡Ø³Øª paste
          Ú©Ù†ÛŒØ¯<br />
          â€¢ Ù‡Ø± Ú©Ù„Ù…Ù‡ Ø±Ø§ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…<br />
          â€¢ Ø§Ú¯Ø± ÛŒÚ© Ø­Ø±Ù Ù‡Ù… Ø§Ø´ØªØ¨Ø§Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡ÛŒÙ…<br />
          â€¢
          <span class="highlight"
            >Ø­ØªÛŒ ÛŒÚ© Ø­Ø±Ù Ø§Ø´ØªØ¨Ø§Ù‡ Ø¨Ø§Ø¹Ø« checksum error Ù…ÛŒâ€ŒØ´ÙˆØ¯!</span
          >
        </div>

        <textarea
          id="input"
          placeholder="12 Ú©Ù„Ù…Ù‡ Trust Wallet Ø®ÙˆØ¯ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ paste Ú©Ù†ÛŒØ¯...

Ù…Ø«Ø§Ù„:
bottom drive obey lake curtain smoke basket hold race lonely fit walk"
        ></textarea>

        <button class="btn btn-check" onclick="check()">ğŸ” Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ù‚ÛŒÙ‚</button>

        <div id="result" class="result"></div>
      </div>
    </div>

    <script type="module">
      import * as bip39 from 'https://cdn.jsdelivr.net/npm/bip39@3.1.0/+esm';
      window.bip39 = bip39;

      // Ù„ÛŒØ³Øª Ú©Ø§Ù…Ù„ 2048 Ú©Ù„Ù…Ù‡ BIP39
      const wordlist = bip39.wordlists.english;

      // ØªØ§Ø¨Ø¹ Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±ÛŒÙ† Ú©Ù„Ù…Ù‡ (Ø¨Ø±Ø§ÛŒ ØªØ§ÛŒÙ¾ Ø§Ø´ØªØ¨Ø§Ù‡)
      function findClosestWord(word) {
        let closest = '';
        let minDistance = Infinity;

        wordlist.forEach((validWord) => {
          const distance = levenshteinDistance(word, validWord);
          if (distance < minDistance) {
            minDistance = distance;
            closest = validWord;
          }
        });

        return { word: closest, distance: minDistance };
      }

      // Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙØ§ØµÙ„Ù‡ Levenshtein (Ø¨Ø±Ø§ÛŒ ØªØ´Ø®ÛŒØµ ØºÙ„Ø· Ø§Ù…Ù„Ø§ÛŒÛŒ)
      function levenshteinDistance(str1, str2) {
        const matrix = [];
        for (let i = 0; i <= str2.length; i++) {
          matrix[i] = [i];
        }
        for (let j = 0; j <= str1.length; j++) {
          matrix[0][j] = j;
        }
        for (let i = 1; i <= str2.length; i++) {
          for (let j = 1; j <= str1.length; j++) {
            if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
              matrix[i][j] = matrix[i - 1][j - 1];
            } else {
              matrix[i][j] = Math.min(
                matrix[i - 1][j - 1] + 1,
                matrix[i][j - 1] + 1,
                matrix[i - 1][j] + 1
              );
            }
          }
        }
        return matrix[str2.length][str1.length];
      }

      window.check = function () {
        const input = document.getElementById('input').value;
        const result = document.getElementById('result');

        if (!input.trim()) {
          result.className = 'result error show';
          result.innerHTML = `
                    <div class="big-icon">âš ï¸</div>
                    <div class="title">Ù„Ø·ÙØ§Ù‹ mnemonic Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
                `;
          return;
        }

        // Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ
        const cleaned = input.trim().toLowerCase().replace(/\s+/g, ' ');
        const words = cleaned.split(' ');

        console.log('ğŸ” Input:', input);
        console.log('ğŸ” Cleaned:', cleaned);
        console.log('ğŸ” Words:', words);

        // Ø¨Ø±Ø±Ø³ÛŒ ØªØ¹Ø¯Ø§Ø¯
        if (words.length !== 12 && words.length !== 24) {
          result.className = 'result error show';
          result.innerHTML = `
                    <div class="big-icon">âŒ</div>
                    <div class="title">ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„Ù…Ø§Øª Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª!</div>
                    <p style="text-align: center; font-size: 18px; margin: 15px 0;">
                        Ø´Ù…Ø§ <strong>${words.length}</strong> Ú©Ù„Ù…Ù‡ Ø¯Ø§Ø±ÛŒØ¯<br>
                        ÙˆÙ„ÛŒ Ø¨Ø§ÛŒØ¯ <strong>12</strong> ÛŒØ§ <strong>24</strong> Ú©Ù„Ù…Ù‡ Ø¨Ø§Ø´Ø¯
                    </p>
                    <div class="error-detail">
                        <strong>Ú©Ù„Ù…Ø§Øª Ø´Ù…Ø§:</strong><br>
                        ${words.map((w, i) => `${i + 1}. ${w}`).join('<br>')}
                    </div>
                `;
          return;
        }

        // Ø¨Ø±Ø±Ø³ÛŒ Ù‡Ø± Ú©Ù„Ù…Ù‡
        const invalidWords = [];
        const wordBoxes = words.map((word, index) => {
          const isValid = wordlist.includes(word);

          if (!isValid) {
            const closest = findClosestWord(word);
            invalidWords.push({
              index: index + 1,
              wrong: word,
              suggestion: closest.word,
              distance: closest.distance,
            });
          }

          return {
            index: index + 1,
            word: word,
            valid: isValid,
          };
        });

        // Ø§Ú¯Ø± Ú©Ù„Ù…Ù‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø´Øª
        if (invalidWords.length > 0) {
          result.className = 'result error show';

          let suggestionsHTML = invalidWords
            .map((inv) => {
              return `
                        <div style="margin: 15px 0; padding: 15px; background: #fff3cd; border-radius: 8px;">
                            <div style="font-size: 16px; margin-bottom: 10px;">
                                <strong>Ú©Ù„Ù…Ù‡ ${inv.index}:</strong>
                            </div>
                            <div style="font-size: 18px;">
                                âŒ Ø§Ø´ØªØ¨Ø§Ù‡: <code style="background: #f8d7da; color: #721c24; padding: 5px 10px;">${
                                  inv.wrong
                                }</code>
                            </div>
                            <div style="font-size: 18px; margin-top: 10px;">
                                âœ… Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯: <code style="background: #d4edda; color: #155724; padding: 5px 10px;">${
                                  inv.suggestion
                                }</code>
                            </div>
                            ${
                              inv.distance === 1
                                ? '<div style="margin-top: 8px; color: #856404;">ğŸ’¡ ÙÙ‚Ø· ÛŒÚ© Ø­Ø±Ù Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª!</div>'
                                : ''
                            }
                        </div>
                    `;
            })
            .join('');

          result.innerHTML = `
                    <div class="big-icon">âŒ</div>
                    <div class="title">Ú©Ù„Ù…Ø§Øª Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ù¾ÛŒØ¯Ø§ Ø´Ø¯!</div>
                    <p style="text-align: center; font-size: 18px; margin: 15px 0;">
                        <strong>${invalidWords.length}</strong> Ú©Ù„Ù…Ù‡ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª
                    </p>
                    ${suggestionsHTML}
                    <div style="margin-top: 30px;">
                        <strong style="display: block; margin-bottom: 15px; font-size: 18px;">Ù‡Ù…Ù‡ Ú©Ù„Ù…Ø§Øª:</strong>
                        <div class="word-grid">
                            ${wordBoxes
                              .map(
                                (w) => `
                                <div class="word-box ${
                                  w.valid ? 'valid' : 'invalid'
                                }">
                                    <span class="word-num">#${w.index}</span>
                                    ${w.valid ? 'âœ“' : 'âœ—'} ${w.word}
                                </div>
                            `
                              )
                              .join('')}
                        </div>
                    </div>
                    <div class="info-box" style="margin-top: 20px;">
                        <strong>ğŸ”§ Ú†Ø·ÙˆØ± Ø¯Ø±Ø³Øª Ú©Ù†Ù…ØŸ</strong><br>
                        1. Ú©Ù„Ù…Ø§Øª Ø§Ø´ØªØ¨Ø§Ù‡ Ø±Ø§ Ø¨Ø§ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ù‡Ø§ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ú©Ù†ÛŒØ¯<br>
                        2. Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ø² Trust Wallet Ú©Ù¾ÛŒ Ú©Ù†ÛŒØ¯<br>
                        3. Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ Ù‡Ù…Ù‡ Ø­Ø±ÙˆÙ Ø¯Ø±Ø³Øª Ø§Ø³Øª
                    </div>
                `;
          return;
        }

        // Ø§Ú¯Ø± Ù‡Ù…Ù‡ Ú©Ù„Ù…Ø§Øª valid Ø¨ÙˆØ¯Ù†Ø¯ØŒ checksum Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ…
        const isValidChecksum = bip39.validateMnemonic(cleaned);

        if (!isValidChecksum) {
          result.className = 'result warning show';
          result.innerHTML = `
                    <div class="big-icon">âš ï¸</div>
                    <div class="title">Checksum Ù†Ø§Ù…Ø¹ØªØ¨Ø±!</div>
                    <p style="text-align: center; font-size: 16px; margin: 20px 0; line-height: 1.8;">
                        Ù‡Ù…Ù‡ Ú©Ù„Ù…Ø§Øª ØµØ­ÛŒØ­ Ù‡Ø³ØªÙ†Ø¯ ÙˆÙ„ÛŒ <strong>ØªØ±ØªÛŒØ¨ Ø¢Ù†Ù‡Ø§ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª</strong><br>
                        ÛŒØ§ Ø§ÛŒÙ† mnemonic Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ø§Ø² Trust Wallet Ú¯Ø±ÙØªÙ‡ Ù†Ø´Ø¯Ù‡
                    </p>
                    <div class="info-box">
                        <strong>ğŸ¤” Ø§ÛŒÙ† ÛŒØ¹Ù†ÛŒ Ú†ÛŒØŸ</strong><br><br>
                        Ø¯Ø± BIP39ØŒ Ø¢Ø®Ø±ÛŒÙ† Ú©Ù„Ù…Ù‡ (ÛŒØ§ Ø¨Ø®Ø´ÛŒ Ø§Ø² Ø¢Ù†) ÛŒÚ© checksum Ø§Ø³Øª.<br>
                        Ø§Ú¯Ø± ØªØ±ØªÛŒØ¨ Ú©Ù„Ù…Ø§Øª Ø§Ø´ØªØ¨Ø§Ù‡ Ø¨Ø§Ø´Ø¯ØŒ checksum Ø¯Ø±Ø³Øª Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯.<br><br>
                        <strong>ğŸ’¡ Ø±Ø§Ù‡ Ø­Ù„:</strong><br>
                        1. Ø§Ø² Trust Wallet Ø¯ÙˆØ¨Ø§Ø±Ù‡ mnemonic Ø±Ø§ Ú©Ù¾ÛŒ Ú©Ù†ÛŒØ¯<br>
                        2. Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ ØªØ±ØªÛŒØ¨ Ú©Ù„Ù…Ø§Øª Ø¯Ø±Ø³Øª Ø§Ø³Øª<br>
                        3. Ù‡ÛŒÚ† Ú©Ù„Ù…Ù‡â€ŒØ§ÛŒ Ø±Ø§ Ø¬Ø§Ø¨Ø¬Ø§ Ù†Ú©Ù†ÛŒØ¯<br>
                        4. Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ù‡Ù…Ø§Ù†Ø·ÙˆØ± Ú©Ù‡ Trust Wallet Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ØŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯
                    </div>
                    <div style="margin-top: 20px;">
                        <strong style="display: block; margin-bottom: 15px;">Ú©Ù„Ù…Ø§Øª Ø´Ù…Ø§ (Ù‡Ù…Ù‡ ØµØ­ÛŒØ­ Ù‡Ø³ØªÙ†Ø¯):</strong>
                        <div class="word-grid">
                            ${wordBoxes
                              .map(
                                (w) => `
                                <div class="word-box valid">
                                    <span class="word-num">#${w.index}</span>
                                    âœ“ ${w.word}
                                </div>
                            `
                              )
                              .join('')}
                        </div>
                    </div>
                    <div class="error-detail" style="margin-top: 20px;">
                        <strong>Cleaned mnemonic:</strong><br>
                        ${cleaned}
                    </div>
                `;
          return;
        }

        // Ù…ÙˆÙÙ‚!
        result.className = 'result success show';
        result.innerHTML = `
                <div class="big-icon">âœ…</div>
                <div class="title">Mnemonic Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª!</div>
                <p style="text-align: center; font-size: 18px; margin: 20px 0;">
                    Ù‡Ù…Ù‡ Ú†ÛŒØ² ØµØ­ÛŒØ­ Ø§Ø³Øª Ùˆ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø± wallet Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯
                </p>
                <div class="word-grid">
                    ${wordBoxes
                      .map(
                        (w) => `
                        <div class="word-box valid">
                            <span class="word-num">#${w.index}</span>
                            âœ“ ${w.word}
                        </div>
                    `
                      )
                      .join('')}
                </div>
                <div class="info-box" style="background: #d4edda; border-color: #28a745; margin-top: 20px;">
                    <strong>ğŸ‰ Ø­Ø§Ù„Ø§ Ú†Ú©Ø§Ø± Ú©Ù†Ù…ØŸ</strong><br><br>
                    1. Ø§ÛŒÙ† mnemonic Ø±Ø§ Ø¯Ø± wallet paste Ú©Ù†ÛŒØ¯<br>
                    2. PIN ØªØ¹ÛŒÛŒÙ† Ú©Ù†ÛŒØ¯<br>
                    3. Ø±ÙˆÛŒ Restore Wallet Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯<br>
                    4. Wallet Ø´Ù…Ø§ Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯!
                </div>
            `;
      };

      console.log('âœ… Trust Wallet Mnemonic Checker loaded');
      console.log('ğŸ“¦ BIP39 wordlist size:', wordlist.length);
    </script>
  </body>
</html>
