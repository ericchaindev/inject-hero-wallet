<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ”¬ ØªØ³Øª Mnemonic Ø´Ù…Ø§</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }
      .container {
        max-width: 900px;
        margin: 0 auto;
        background: white;
        border-radius: 16px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        overflow: hidden;
      }
      .header {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
        padding: 30px;
        text-align: center;
      }
      .content {
        padding: 30px;
      }
      .result {
        margin: 20px 0;
        padding: 25px;
        border-radius: 12px;
      }
      .result.error {
        background: #fee;
        border: 3px solid #fcc;
      }
      .result.success {
        background: #efe;
        border: 3px solid #cfc;
      }
      .big-icon {
        font-size: 60px;
        text-align: center;
        margin-bottom: 15px;
      }
      .title {
        font-size: 28px;
        font-weight: bold;
        text-align: center;
        margin-bottom: 20px;
      }
      .word-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
        margin: 20px 0;
      }
      .word-box {
        padding: 15px;
        border-radius: 8px;
        text-align: center;
        font-family: 'Consolas', monospace;
        font-size: 14px;
        font-weight: bold;
        border: 3px solid;
      }
      .word-box.valid {
        background: #d4edda;
        border-color: #28a745;
        color: #155724;
      }
      .word-box.invalid {
        background: #f8d7da;
        border-color: #dc3545;
        color: #721c24;
      }
      .word-num {
        display: block;
        font-size: 11px;
        opacity: 0.6;
        margin-bottom: 5px;
      }
      .info-box {
        background: #e7f3ff;
        border: 3px solid #4dabf7;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        font-size: 15px;
        line-height: 1.8;
      }
      .error-detail {
        background: white;
        padding: 20px;
        border-radius: 8px;
        margin: 15px 0;
        direction: ltr;
        text-align: left;
        font-family: 'Consolas', monospace;
        font-size: 14px;
        line-height: 1.8;
      }
      code {
        background: #f4f4f4;
        padding: 3px 8px;
        border-radius: 4px;
        font-family: 'Consolas', monospace;
      }
      .btn {
        width: 100%;
        padding: 18px;
        margin: 15px 0;
        border: none;
        border-radius: 8px;
        font-size: 18px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }
      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>ğŸ”¬ ØªØ³Øª Ø¯Ù‚ÛŒÙ‚ Mnemonic Ø´Ù…Ø§</h1>
      </div>

      <div class="content">
        <div id="autoTest"></div>
      </div>
    </div>

    <script type="module">
      import * as bip39 from 'https://cdn.jsdelivr.net/npm/bip39@3.1.0/+esm';

      const YOUR_MNEMONIC =
        'great orchard youth occur banana swap soap floor video debris snap shoe';

      async function testYourMnemonic() {
        const result = document.getElementById('autoTest');

        console.log('ğŸ”¬ Testing your exact mnemonic:', YOUR_MNEMONIC);

        // Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ
        const cleaned = YOUR_MNEMONIC.trim().toLowerCase().replace(/\s+/g, ' ');
        const words = cleaned.split(' ');
        const wordlist = bip39.wordlists.english;

        console.log('ğŸ“ Cleaned:', cleaned);
        console.log('ğŸ“Š Word count:', words.length);
        console.log('ğŸ“‹ Words:', words);

        // Ø¨Ø±Ø±Ø³ÛŒ Ù‡Ø± Ú©Ù„Ù…Ù‡
        const invalidWords = [];
        const wordBoxes = words.map((word, index) => {
          const isValid = wordlist.includes(word);
          console.log(
            `Word ${index + 1}: "${word}" -> ${
              isValid ? 'âœ“ Valid' : 'âœ— Invalid'
            }`
          );

          if (!isValid) {
            // Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±ÛŒÙ† Ú©Ù„Ù…Ù‡
            let closest = '';
            let minDist = Infinity;
            wordlist.forEach((validWord) => {
              if (validWord.startsWith(word.charAt(0))) {
                const dist = Math.abs(validWord.length - word.length);
                if (dist < minDist) {
                  minDist = dist;
                  closest = validWord;
                }
              }
            });

            invalidWords.push({
              index: index + 1,
              wrong: word,
              suggestion: closest,
            });
          }

          return {
            index: index + 1,
            word: word,
            valid: isValid,
          };
        });

        // Ø¨Ø±Ø±Ø³ÛŒ checksum
        const isValidChecksum = bip39.validateMnemonic(cleaned);
        console.log('ğŸ” Checksum valid:', isValidChecksum);

        // Ù†Ù…Ø§ÛŒØ´ Ù†ØªÛŒØ¬Ù‡
        if (invalidWords.length > 0) {
          // Ú©Ù„Ù…Ù‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯
          result.innerHTML = `
                    <div class="result error">
                        <div class="big-icon">âŒ</div>
                        <div class="title">Ú©Ù„Ù…Ø§Øª Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ù¾ÛŒØ¯Ø§ Ø´Ø¯!</div>
                        <p style="text-align: center; font-size: 18px; margin: 15px 0;">
                            <strong>${
                              invalidWords.length
                            }</strong> Ú©Ù„Ù…Ù‡ Ø¯Ø± Ù„ÛŒØ³Øª BIP39 Ù†ÛŒØ³Øª
                        </p>
                        ${invalidWords
                          .map(
                            (inv) => `
                            <div class="info-box" style="background: #fff3cd; border-color: #ffc107;">
                                <strong>Ú©Ù„Ù…Ù‡ ${inv.index}:</strong><br>
                                âŒ Ø§Ø´ØªØ¨Ø§Ù‡: <code style="background: #f8d7da; color: #721c24; padding: 5px 10px; font-size: 16px;">${inv.wrong}</code><br>
                                <br>
                                âœ… Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±ÛŒÙ† Ú©Ù„Ù…Ù‡ Ù…Ø¹ØªØ¨Ø±: <code style="background: #d4edda; color: #155724; padding: 5px 10px; font-size: 16px;">${inv.suggestion}</code>
                            </div>
                        `
                          )
                          .join('')}
                    </div>
                    
                    <div class="word-grid">
                        ${wordBoxes
                          .map(
                            (w) => `
                            <div class="word-box ${
                              w.valid ? 'valid' : 'invalid'
                            }">
                                <span class="word-num">#${w.index}</span>
                                ${w.valid ? 'âœ“' : 'âœ—'} ${w.word}
                            </div>
                        `
                          )
                          .join('')}
                    </div>
                    
                    <div class="info-box">
                        <strong>ğŸ”§ Ú†Ø·ÙˆØ± Ø¯Ø±Ø³Øª Ú©Ù†Ù…ØŸ</strong><br><br>
                        1. Ú©Ù„Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø±Ø§ Ø¨Ø§ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ú©Ù†ÛŒØ¯<br>
                        2. ÛŒØ§ Ø§Ø² Trust Wallet Ø¯ÙˆØ¨Ø§Ø±Ù‡ mnemonic Ø±Ø§ Ú©Ù¾ÛŒ Ú©Ù†ÛŒØ¯<br>
                        3. Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ Ù‡ÛŒÚ† ØªØ§ÛŒÙ¾ÛŒ Ø§Ù†Ø¬Ø§Ù… Ù†Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒØ¯ (ÙÙ‚Ø· Copy/Paste)
                    </div>
                `;
        } else if (!isValidChecksum) {
          // Ù‡Ù…Ù‡ Ú©Ù„Ù…Ø§Øª Ø¯Ø±Ø³Øª ÙˆÙ„ÛŒ checksum Ø§Ø´ØªØ¨Ø§Ù‡
          result.innerHTML = `
                    <div class="result error">
                        <div class="big-icon">âš ï¸</div>
                        <div class="title">Checksum Ù†Ø§Ù…Ø¹ØªØ¨Ø±!</div>
                        <p style="text-align: center; font-size: 18px; margin: 20px 0; line-height: 1.8;">
                            Ù‡Ù…Ù‡ Ú©Ù„Ù…Ø§Øª ØµØ­ÛŒØ­ Ù‡Ø³ØªÙ†Ø¯<br>
                            ÙˆÙ„ÛŒ <strong>ØªØ±ØªÛŒØ¨ Ø¢Ù†Ù‡Ø§ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª</strong>
                        </p>
                        
                        <div class="word-grid">
                            ${wordBoxes
                              .map(
                                (w) => `
                                <div class="word-box valid">
                                    <span class="word-num">#${w.index}</span>
                                    âœ“ ${w.word}
                                </div>
                            `
                              )
                              .join('')}
                        </div>
                        
                        <div class="info-box">
                            <strong>ğŸ¤” Ø§ÛŒÙ† ÛŒØ¹Ù†ÛŒ Ú†ÛŒØŸ</strong><br><br>
                            Ø¯Ø± BIP39ØŒ Ø¢Ø®Ø±ÛŒÙ† Ú©Ù„Ù…Ù‡ Ø´Ø§Ù…Ù„ ÛŒÚ© checksum Ø§Ø³Øª Ú©Ù‡ Ø§Ø² Ú©Ù„Ù…Ø§Øª Ù‚Ø¨Ù„ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.<br>
                            Ø§Ú¯Ø± ØªØ±ØªÛŒØ¨ Ú©Ù„Ù…Ø§Øª Ø§Ø´ØªØ¨Ø§Ù‡ Ø¨Ø§Ø´Ø¯ØŒ checksum Ø¯Ø±Ø³Øª Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯.<br><br>
                            <strong>ğŸ’¡ Ø±Ø§Ù‡ Ø­Ù„:</strong><br>
                            â€¢ Ø§Ø² Trust Wallet Ø¯ÙˆØ¨Ø§Ø±Ù‡ mnemonic Ø±Ø§ Ú©Ù¾ÛŒ Ú©Ù†ÛŒØ¯<br>
                            â€¢ Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ ØªØ±ØªÛŒØ¨ Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ù‡Ù…Ø§Ù† Ø§Ø³Øª Ú©Ù‡ Trust Wallet Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯<br>
                            â€¢ Ù‡ÛŒÚ† Ú©Ù„Ù…Ù‡â€ŒØ§ÛŒ Ø±Ø§ Ø¬Ø§Ø¨Ø¬Ø§ Ù†Ú©Ù†ÛŒØ¯
                        </div>
                        
                        <div class="error-detail">
                            <strong>ğŸ” Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÚ©Ù†ÛŒÚ©Ø§Ù„:</strong><br>
                            <br>
                            Mnemonic: <code>${cleaned}</code><br>
                            Word count: ${words.length} âœ“<br>
                            All words valid: Yes âœ“<br>
                            Checksum: <span style="color: red; font-weight: bold;">Failed âœ—</span><br>
                            <br>
                            <strong>Possible causes:</strong><br>
                            â€¢ Wrong word order<br>
                            â€¢ Mnemonic not copied correctly from Trust Wallet<br>
                            â€¢ Different mnemonic than expected
                        </div>
                    </div>
                `;
        } else {
          // Ù…ÙˆÙÙ‚!
          result.innerHTML = `
                    <div class="result success">
                        <div class="big-icon">âœ…</div>
                        <div class="title">Mnemonic Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª!</div>
                        <p style="text-align: center; font-size: 18px; margin: 20px 0;">
                            Ù‡Ù…Ù‡ Ú†ÛŒØ² ØµØ­ÛŒØ­ Ø§Ø³Øª!
                        </p>
                        
                        <div class="word-grid">
                            ${wordBoxes
                              .map(
                                (w) => `
                                <div class="word-box valid">
                                    <span class="word-num">#${w.index}</span>
                                    âœ“ ${w.word}
                                </div>
                            `
                              )
                              .join('')}
                        </div>
                        
                        <div class="info-box" style="background: #d4edda; border-color: #28a745;">
                            <strong>ğŸ‰ Ø­Ø§Ù„Ø§ Ú†Ú©Ø§Ø± Ú©Ù†Ù…ØŸ</strong><br><br>
                            Ø§ÛŒÙ† mnemonic Ú©Ø§Ù…Ù„Ø§Ù‹ Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª Ùˆ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø± wallet Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯!
                        </div>
                        
                        <div class="error-detail">
                            <strong>âœ… Validation results:</strong><br>
                            <br>
                            Word count: ${words.length} âœ“<br>
                            All words valid: Yes âœ“<br>
                            Checksum: <span style="color: green; font-weight: bold;">Valid âœ“</span><br>
                            <br>
                            <strong>BIP39 validation: PASSED</strong>
                        </div>
                    </div>
                `;
        }
      }

      // ØªØ³Øª Ø®ÙˆØ¯Ú©Ø§Ø±
      testYourMnemonic();
    </script>
  </body>
</html>
